<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" type="image/x-icon" href="images/IMG_20231105_202217_434-removebg.png">
    <link rel="stylesheet" href="CSSFiles/Normalize.css" />
    <link rel="stylesheet" href="CSSFiles/all.min.css" />
    <link rel="stylesheet" href="CSSFiles/NewACC.css">
    <title>HerafNEW</title>
</head>
<body>

<header>
    <div class="container">
        <div class="logo">
            <img src="images/IMG_20231105_202217_434-removebg.png" alt="Logo">
        </div>
        <i class="fas fa-bars toggle-menu"></i>
        <div class="links">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="index.html#sur">Services</a></li>
                <li><a href="index.html#about">About</a></li>
            </ul>
            <a href="login.html">
                <i class="fa-solid fa-user"></i>
            </a>
        </div>
    </div>
</header>

<div class="background"></div>
<div class="lay"></div>

<div class="main-box center">
    <h2>Create New Account</h2>
    <form id="signup-form" enctype="multipart/form-data">
        <label for="fname">First name:</label>
        <input name="first_name" type="text" id="fname" placeholder="Enter First Name" maxlength="15" required>
        
        <label for="lname">Last name:</label>
        <input name="last_name" type="text" id="lname" placeholder="Enter Last Name" maxlength="15" required>
        
        <label for="photo">Your Profile Photo:</label>
        <input type="file" name="photo" id="photo" required accept="image/*">
        
        <label for="governorate">Governorate:</label>
        <select name="governorate" id="governorate">
            <option value=""></option>
            <option value="Cairo">Cairo</option>
            <option value="Alexandria">Alexandria</option>
            <option value="Giza">Giza</option>
            <option value="Luxor">Luxor</option>
            <option value="Aswan">Aswan</option>
            <option value="Qena">Qena</option>
            <option value="Sohag">Sohag</option>
        </select>
        
        <label for="Country">Your Country:</label>
        <select name="Country" id="Country">
            <option value=""></option>
            <optgroup label="Cairo" style="display: none;">
                <option value="Maadi">Maadi</option>
                <option value="Zamalek">Zamalek</option>
                <option value="Heliopolis">Heliopolis</option>
                <option value="Nasr City">Nasr City</option>
                <option value="Mohandessin">Mohandessin</option>
            </optgroup>
            <!-- Additional optgroups as per your requirement -->
        </select>

        <label for="num">Your phone number:</label>
        <input type="tel" name="phone" id="num" placeholder="01091532721" maxlength="11">
        
        <label for="ifemp">Are you an employee?</label>
        <select name="ifemp" id="ifemp" required>
            <option value="yes">Yes</option>
            <option value="no" selected>No</option>
        </select>

        <div id="employee-fields" style="display: none;">
            <label for="jobInfo">Your job:</label>
            <input type="text" name="jobInfo" id="jobInfo">
            
            <label for="aboutyou">About You:</label>
            <input type="text" name="aboutyou" id="aboutyou">
        </div>

        <label for="Email">Email:</label>
        <input name="email" type="email" id="Email" placeholder="yourmail@gmail.com" maxlength="25" required>
        
        <label for="pass">Password:</label>
        <input name="pass_word" type="password" id="pass" placeholder="********" maxlength="25" minlength="5" required>
        
        <label for="cpass">Confirm Password:</label>
        <input type="password" id="cpass" placeholder="********" maxlength="25" minlength="5" required>
        
        <input class="sub" type="submit" value="Sign Up">
        
        <div id="error-message"></div>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('signup-form');
        const pass = document.getElementById('pass');
        const cpass = document.getElementById('cpass');
        const ifemp = document.getElementById('ifemp');
        const employeeFields = document.getElementById('employee-fields');
        const errorMessage = document.getElementById('error-message');
        
        ifemp.addEventListener('change', function () {
            if (ifemp.value === 'yes') {
                employeeFields.style.display = 'block';
            } else {
                employeeFields.style.display = 'none';
            }
        });
        
        form.addEventListener('submit', function (e) {
            if (pass.value !== cpass.value) {
                e.preventDefault();
                errorMessage.textContent = 'Passwords do not match.';
                errorMessage.style.color = 'red';
                return false;
            }
            
            const formData = new FormData(form);
            
            fetch('codeNewAcc.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = 'login.html';
                } else {
                    errorMessage.textContent = data.message;
                    errorMessage.style.color = 'red';
                }
            })
            .catch(error => {
                errorMessage.textContent = 'An error occurred. Please try again.';
                errorMessage.style.color = 'red';
            });
            
            e.preventDefault();
        });
    });
</script>
</body>
</html>
